<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Digital Valentine | Story</title>
    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs" type="module"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --bg-deep: #0f0c1d; --accent: #ff2d75; }
        
        body, html {
            margin: 0; padding: 0; 
            width: 100%; 
            min-height: 100dvh; 
            font-family: 'Inter', sans-serif;
            background-color: #0f0c1d;
            background-image: radial-gradient(circle at center, #1e1333 0%, #0f0c1d 100%);
            background-attachment: fixed; 
            background-size: cover;
            background-repeat: no-repeat;
            color: white; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #intro-screen {
            display: flex; flex-direction: column; align-items: center;
            transition: opacity 1.5s ease, transform 1.5s ease;
            cursor: default;
            -webkit-tap-highlight-color: transparent;
            position: relative;
            width: 100%; height: 100%; justify-content: center;
        }
        
        #intro-screen.clickable { cursor: pointer; }

        .animation-container {
            width: 380px; height: 380px;
            max-width: 90vw; max-height: 90vw;
            position: relative;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        .lottie-wrapper {
            width: 100%; height: 100%;
            filter: drop-shadow(0 0 40px rgba(255, 45, 117, 0.3));
            transition: transform 0.3s ease, opacity 1s ease-in-out;
            position: absolute; top: 0; left: 0;
            display: flex; justify-content: center; align-items: center;
        }

        #player-man { transform: scale(1.15); width: 100%; height: 100%; }
        #intro-screen.clickable:hover .animation-container { transform: scale(1.05); transition: transform 0.3s ease; }

        .hidden { opacity: 0; pointer-events: none; z-index: 1; }
        .visible { opacity: 1; z-index: 2; }

        .intro-text {
            margin-top: 20px; text-align: center;
            opacity: 0; transition: opacity 1s ease;
            color: rgba(255, 255, 255, 0.9);
            min-height: 40px; position: relative; z-index: 10;
        }
        
        .intro-text.visible { animation: pulse 2.5s infinite; opacity: 1; }
        
        .line-1 { display: block; font-size: 13px; letter-spacing: 3px; text-transform: uppercase; font-weight: 600; margin-bottom: 5px; }
        .line-2 { display: block; font-size: 11px; letter-spacing: 5px; text-transform: uppercase; font-weight: 300; opacity: 0.7; }
        
        @keyframes pulse { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }
    </style>
</head>
<body>
    <div id="intro-screen" onclick="goToNextPage()">
        <div class="animation-container">
            <div id="wrapper-man" class="lottie-wrapper visible">
                <dotlottie-player id="player-man" src="https://lottie.host/43d94318-f273-4d49-89fa-6c73476c928b/JSZXP0vfQb.lottie" background="transparent" speed="1" autoplay></dotlottie-player>
            </div>
            <div id="wrapper-flower" class="lottie-wrapper hidden">
                <dotlottie-player id="player-flower" src="https://lottie.host/6400e67e-005b-4ee6-b6dc-b7dca39f5cdd/Tjl38AIdzr.lottie" background="transparent" speed="1" style="width: 100%; height: 100%;" loop></dotlottie-player>
            </div>
        </div>
        <div class="intro-text" id="text-container"></div>
    </div>

    <script>
        const playerMan = document.getElementById('player-man');
        const playerFlower = document.getElementById('player-flower');
        const wrapperMan = document.getElementById('wrapper-man');
        const wrapperFlower = document.getElementById('wrapper-flower');
        const textContainer = document.getElementById('text-container');
        const screen = document.getElementById('intro-screen');
        
        let canClick = false;

        playerMan.addEventListener('complete', () => {
            if (!canClick) {
                wrapperMan.classList.remove('visible');
                wrapperMan.classList.add('hidden');

                setTimeout(() => {
                    playerFlower.play();
                    wrapperFlower.classList.remove('hidden');
                    wrapperFlower.classList.add('visible');
                    
                    // ENGLISH TRANSLATION HERE
                    textContainer.innerHTML = `<span class="line-1">CLICK THE FLOWER</span><span class="line-2">FOR YOU</span>`;
                    textContainer.classList.add('visible');
                    screen.classList.add('clickable');
                    canClick = true;
                }, 800); 
            }
        });

        function goToNextPage() {
            if (canClick) {
                screen.style.opacity = '0';
                screen.style.transform = 'scale(1.1)'; 

                setTimeout(() => {
                    const urlParams = new URLSearchParams(window.location.search);
                    const valentineId = urlParams.get('id');
                    if (valentineId) {
                        window.location.href = 'photo.html?id=' + valentineId;
                    } else {
                        window.location.href = 'photo.html';
                    }
                }, 1500); 
            }
        }
    </script>
</body>
</html>
